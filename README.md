# üéµ SpotiFLAC v2.1.0 - –ö—Ä–∞—Å–∏–≤—ã–π UI —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è SpotiFLAC —Å –∫—Ä–∞—Å–∏–≤—ã–º –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

* üé® **–ö—Ä–∞—Å–∏–≤—ã–π UI** - –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º –∏ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π –Ω–æ—Ç–æ–π
* üöÄ **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** - –ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Docker Compose
* üåê **–í–µ–±-API** - FastAPI —Å –æ—á–µ—Ä–µ–¥—è–º–∏, –ª–æ–≥–∞–º–∏ –∏ WebSocket
* ‚ö° **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω** - –±–µ–ª—ã–π —Ñ–æ–Ω, –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞, hover —ç—Ñ—Ñ–µ–∫—Ç—ã

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–æ–≤/–∞–ª—å–±–æ–º–æ–≤/–ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ Spotify —á–µ—Ä–µ–∑ Qobuz, Tidal, Deezer –∏ Amazon;
* —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ —à–∞–±–ª–æ–Ω—É `{artist}/{album}/{track:02d} - {title}.{ext}`;
* —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `/config`, —Ñ–∞–π–ª–æ–≤ ‚Äî –≤ `/downloads`;
* –≤—ã–±–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–∞ –∑–∞–≥—Ä—É–∑–æ–∫: –ø–æ –∞—Ä—Ç–∏—Å—Ç–∞–º –∏–ª–∏ –≤ –æ–¥–Ω—É –ø–∞–ø–∫—É;
* live-–ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ WebSocket –∏ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤;
* —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ Docker/Docker Compose –¥–ª—è API –∏ UI.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
  adapters/      # –∞–¥–∞–ø—Ç–µ—Ä—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Spotify, Qobuz, Tidal, Deezer, Amazon)
  api/           # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ —Å—Ö–µ–º—ã
  cli/           # Typer CLI
  core/          # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –æ—á–µ—Ä–µ–¥—å –∏ –º–æ–¥–µ–ª–∏
  infra/         # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
  ui/            # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (Vite + React)
  requirements.txt
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r app/requirements.txt
```

–î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Node 20 –∏ `npm install` –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ `app/ui`.

## CLI

CLI –¥–æ—Å—Ç—É–ø–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π `python -m app.cli.main`.

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ (ffmpeg, –∫–∞—Ç–∞–ª–æ–≥–∏)
python -m app.cli.main probe

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Qobuz)
python -m app.cli.main login qobuz --data '{"user_auth_token": "..."}'

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
python -m app.cli.main fetch \
  "https://open.spotify.com/album/..." \
  --store qobuz \
  --quality 24-bit
```

–í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–∫–æ–≤ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∞.

## –í–µ–±-API

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º, –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ [docs/API.md](docs/API.md).

* `POST /auth/{provider}` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞;
* `GET /providers` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤;
* `POST /jobs` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É (`provider`, `store`, `url`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `quality`, `path_template`);
* `GET /jobs`, `GET /jobs/{id}` ‚Äî —Å–ø–∏—Å–æ–∫ –∏ –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á;
* `DELETE /jobs/{id}` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É;
* `GET /jobs/{id}/logs` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞;
* `GET /files` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—ã–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤;
* `GET /settings` / `PUT /settings` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –∏ —Ä–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤;
* `GET /healthz`, `/readyz`, `/metrics` ‚Äî —Å–ª—É–∂–µ–±–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã;
* `WS /ws/progress` ‚Äî live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á.

## –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Vite/React –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—á–µ—Ä–µ–¥–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤. –ë–∞–∑–æ–≤—ã–π URL API –∑–∞–¥–∞—ë—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `VITE_API_BASE` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/api`).

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ UI

```bash
cd app/ui
npm install
npm run dev -- --host
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/26rusreal/SpotiFLAC-Docker.git
cd SpotiFLAC-Docker

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker compose up -d

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:8083
```

### –î–æ—Å—Ç—É–ø—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

* **UI** ‚Äî `http://localhost:8083` (–∫—Ä–∞—Å–∏–≤—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
* **API** ‚Äî `http://localhost:8080` (REST API)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f
```

## üì¶ Docker –æ–±—Ä–∞–∑—ã

### –¢–µ–≥–∏
- `spotiflac-ui:v2.1.0` - UI —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- `spotiflac-api:v2.1.0` - API —Å–µ—Ä–≤–µ—Ä

### –†–∞–∑–º–µ—Ä—ã
- UI: ~53MB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- API: ~632MB (—Å Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)

## –¢–µ—Å—Ç—ã –∏ –∫–∞—á–µ—Å—Ç–≤–æ

* —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app`;
* —Ä—É—á–Ω–æ–π –ø—Ä–æ–≥–æ–Ω `python -m app.cli.main probe` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[DEPLOYMENT.md](./DEPLOYMENT.md)** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- **[RELEASE_v2.1.0.md](./RELEASE_v2.1.0.md)** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–ª–∏–∑–µ v2.1.0
- **[PUBLISH_INSTRUCTIONS.md](./PUBLISH_INSTRUCTIONS.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues**: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/26rusreal/SpotiFLAC-Docker/issues)
- **–í–µ—Ä—Å–∏–∏**: [–í—Å–µ —Ä–µ–ª–∏–∑—ã](https://github.com/26rusreal/SpotiFLAC-Docker/releases)

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 20.10+
- Docker Compose 2.0+
- 2GB RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- 1GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Å–ª–æ–≤–∏—è—Ö –∏—Å—Ö–æ–¥–Ω–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è SpotiFLAC.
